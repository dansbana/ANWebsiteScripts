!function(){function t(t,e,n,o){const r=e?e.toLowerCase():null;document.querySelectorAll(t).forEach(t=>{const e=t.textContent.replace(/\s+/g," ").trim().toLowerCase();r&&!e.includes(r)||(t.innerHTML=n,"function"==typeof o&&t.addEventListener("click",o))})}function e(t,e){const n=Array.isArray(e)?e:[e];document.querySelectorAll(t).forEach(t=>{const e=t.textContent.replace(/\s+/g," ").trim().toLowerCase();n.some(t=>e.includes(t.toLowerCase()))&&(t.style.display="none")})}function n(){t("h3","Request","Place Library Order"),t("button.ant-btn-primary","submit quote","Submit order"),t(".ant-modal-body p","This option is for",""),t(".ant-modal-body p","Use the box below","Any special instructions or questions about your order?"),t(".ant-modal-body em","your cart will be","Your cart will be cleared upon submitting your order."),function(t){const e=document.querySelector(".ant-modal-body textarea.ant-input");if(!e)return;const n=Object.getPrototypeOf(e),o=Object.getOwnPropertyDescriptor(n,"value")?.set;o?o.call(e,t):e.value=t;const r=new Event("input",{bubbles:!0});e.dispatchEvent(r)}("My order is good to go.")}function o(){t("button.ant-btn.ant-btn-default.ant-btn-block","Request a school","Place Library Order",()=>setTimeout(n,50)),e("button.ant-btn-default.checkout-btn","Ship"),e("button.ant-btn-primary.checkout-btn","Pick up"),e("button.ant-btn-default.ant-btn-block","Deliver"),t(".ant-result-title span","your quote request has been submitted","<strong>Your order has been submitted.</strong><br/><br/>"),t(".ant-result-subtitle div","we will review your quote and comments","<b>IMPORTANT NOTE: Your email confirmation will label this order a &quot;Quote Request,&quot; but we will process it as an order from your library.</b>"),function(t){if(console.log("showAccountIdWhenRequested: Showing account ID for user",t),!ShowAcctIds.length||!t)return;const e=ShowAcctIds.map(t=>t.toLowerCase()),n=document.querySelectorAll("button.ant-btn-primary.styled_btn span,.ant-avatar-string div,.ant-drawer-title");n.length&&n.forEach(n=>{const o=n.textContent.trim().toLowerCase();e.some(t=>o.includes(t))&&(n.textContent.includes("ID:")||(n.textContent=`${t.company||t.first_name} (ID: ${t.corp_id} VER: ${window.version})`))})}(libUser)}function r(){t("span","requested a quote","<strong>Order Type</strong> Library"),t(".ant-card-body div:not(:has(*))","requested a quote","Standard library delivery")}function s(){console.log("CustLibFunc: runLibTweaksForCurrentPage on",location.pathname),o(),function(){const t=document.querySelector("aside.responsiveSummary");t&&new MutationObserver(()=>{o()}).observe(t,{childList:!0,subtree:!0})}(),location.pathname.startsWith("/account/order")&&(console.log("CustLibFunc: Order Summary Watcher Running"),function(){let t=0,e=!1;const n=setInterval(()=>{t++,r();const o=Array.from(document.querySelectorAll("span")).some(t=>{const e=t.textContent.toLowerCase();return e.includes("order type")&&e.includes("library")});!e&&40>t||clearInterval(n),o&&(e=!0)},250)}(),function(){const t=document.querySelector("aside.responsiveSummaryLeft");t&&new MutationObserver(()=>{r()}).observe(t,{childList:!0,subtree:!0})}())}window.version="V1.0.17",console.log("Loading Custom Library Functionaltiy",location.pathname),function(){const t=history.pushState,e=history.replaceState;function n(){s()}history.pushState=function(){const e=t.apply(this,arguments);return n(),e},history.replaceState=function(){const t=e.apply(this,arguments);return n(),t},window.addEventListener("popstate",n)}(),s(),function(){if(console.log("LibraryScript: Patching fetch"),!window.fetch)return;const t=window.fetch;window.fetch=function(e,n){const o="string"==typeof e?e:e&&e.url;console.log("LibraryScript: Fetching URL",o);const r=t.apply(this,arguments);return o&&-1!==o.indexOf("/customer/session/get")&&(console.log("LibraryScript: Fetching session get"),r.then(function(t){try{t.clone().json().then(function(t){t&&t.user&&(console.log("LibraryScript: fetch causing tweaks to run"),s())}).catch(function(){})}catch(t){}}).catch(function(){})),r}}()}();