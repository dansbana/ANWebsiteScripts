!function(){console.log("Loading Custom Library Functionaltiy",location.pathname);let t=!1;function e(){console.log("CustLibFunc: runLibTweaksForCurrentPage on",location.pathname),n(r,"Request a school","Place Library Order",()=>setTimeout(s,50)),o(c,"Ship"),o(i,"Pick up"),o(a,"Deliver"),n(".ant-result-title span","your quote request has been submitted","<strong>Your order has been submitted.</strong><br/><br/>"),n(".ant-result-subtitle div","we will review your quote and comments","<b>IMPORTANT NOTE: Your email confirmation will label this order a &quot;Quote Request,&quot; but we will process it as an order from your library.</b>"),location.pathname.startsWith("/account/order")&&(console.log("CustLibFunc: Order Summary Watcher Running"),function(){let t=0,e=!1;const o=setInterval(()=>{t++,n("span","requested a quote","<strong>Order Type</strong> Library"),n(".ant-card-body div:not(:has(*))","requested a quote","Standard library delivery");const r=Array.from(document.querySelectorAll("span")).some(t=>{const e=t.textContent.toLowerCase();return e.includes("order type")&&e.includes("library")});!e&&40>t||clearInterval(o),r&&(e=!0)},250)}())}function n(t,e,n,o){const r=e?e.toLowerCase():null;document.querySelectorAll(t).forEach(t=>{const e=t.textContent.replace(/\s+/g," ").trim().toLowerCase();r&&!e.includes(r)||(t.innerHTML=n,"function"==typeof o&&t.addEventListener("click",o))})}function o(t,e){const n=Array.isArray(e)?e:[e];document.querySelectorAll(t).forEach(t=>{const e=t.textContent.replace(/\s+/g," ").trim().toLowerCase();n.some(t=>e.includes(t.toLowerCase()))&&(t.style.display="none")})}const r="button.ant-btn.ant-btn-default.ant-btn-block",c="button.ant-btn-default.checkout-btn",i="button.ant-btn-primary.checkout-btn",a="button.ant-btn-default.ant-btn-block";function s(){n("h3","Request","Place Library Order"),n("button.ant-btn-primary","submit quote","Submit order"),n(".ant-modal-body p","This option is for",""),n(".ant-modal-body p","Use the box below","Any special instructions or questions about your order?"),n(".ant-modal-body em","your cart will be","Your cart will be cleared upon submitting your order."),function(t){const e=document.querySelector(".ant-modal-body textarea.ant-input");if(!e)return;const n=Object.getPrototypeOf(e),o=Object.getOwnPropertyDescriptor(n,"value")?.set;o?o.call(e,t):e.value=t;const r=new Event("input",{bubbles:!0});e.dispatchEvent(r)}("My order is good to go.")}!function(){if(!window.fetch)return;const n=window.fetch;window.fetch=function(o,r){const c="string"==typeof o?o:o&&o.url,i=n.apply(this,arguments);return c&&-1!==c.indexOf("/customer/session/get")&&i.then(function(n){try{n.clone().json().then(function(n){const o=n&&n.user;o&&(!function(t){if(!window.ShowAcctIds||!Array.isArray(window.ShowAcctIds))return;const e=window.ShowAcctIds.map(t=>t.toLowerCase()),n=document.querySelectorAll("button.ant-btn-primary.styled_btn span,.ant-avatar-string div,.ant-drawer-title");n.length&&n.forEach(n=>{const o=n.textContent.trim().toLowerCase();e.some(t=>o.includes(t))&&(n.textContent.includes("ID:")||(n.textContent=`${t.company||t.first_name} (ID: ${t.corp_id})`))})}(o),libAccts.includes(o.corp_id)?(console.log("CustLibFunc: Library account detected"),t=!0,e()):console.log("CustLibFunc: Non-library account."))}).catch(function(){})}catch(t){}}).catch(function(){}),i}}(),function(){const n=history.pushState,o=history.replaceState;function r(){t&&e()}function c(){console.log("Poking app to refetch session via focus/visibility...");try{window.dispatchEvent(new Event("focus"))}catch(t){}try{document.dispatchEvent(new Event("visibilitychange"))}catch(t){}}history.pushState=function(){const t=n.apply(this,arguments);return r(),t},history.replaceState=function(){const t=o.apply(this,arguments);return r(),t},window.addEventListener("popstate",r),"complete"===document.readyState||"interactive"===document.readyState?setTimeout(c,50):window.addEventListener("DOMContentLoaded",function(){setTimeout(c,50)})}()}();