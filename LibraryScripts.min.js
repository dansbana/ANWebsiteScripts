const libAccts=[1627756];let isLibraryAccount=!1;function runLibTweaksForCurrentPage(){console.log("CustLibFunc: runLibTweaksForCurrentPage on",location.pathname),libraryTweak(),location.pathname.startsWith("/account/orders")&&(console.log("CustLibFunc: Order Summary Watcher Running"),startOrderSummaryWatcher())}function repElContent(t,e,n,r){const o=e?e.toLowerCase():null;document.querySelectorAll(t).forEach((t=>{const e=t.textContent.replace(/\s+/g," ").trim().toLowerCase();o&&!e.includes(o)||(t.innerHTML=n,"function"==typeof r&&t.addEventListener("click",r))}))}function hideBtn(t,e){const n=Array.isArray(e)?e:[e];document.querySelectorAll(t).forEach((t=>{const e=t.textContent.replace(/\s+/g," ").trim().toLowerCase();n.some((t=>e.includes(t.toLowerCase())))&&(t.style.display="none")}))}const SQTE_BTN_SEL="button.ant-btn.ant-btn-default.ant-btn-block",SHIP_SEL="button.ant-btn-default.checkout-btn",PKUP_SEL="button.ant-btn-primary.checkout-btn",DEL_SEL="button.ant-btn-default.ant-btn-block";function setTAValue(e){const t=document.querySelector(".ant-modal-body textarea.ant-input");if(!t)return;t.value=e,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0}))}function tweakModal(){repElContent("h3","Request","Place Library Order"),repElContent("button.ant-btn-primary","submit quote","Submit order"),repElContent(".ant-modal-body p","This option is for",""),repElContent(".ant-modal-body p","Use the box below","Any special instructions or questions about your order?"),repElContent(".ant-modal-body em","your cart will be","Your cart will be cleared upon submitting your order."),setTAValue("My order is good to go.")}function libraryTweak(){repElContent(SQTE_BTN_SEL,"Request a school","Place Library Order",(()=>setTimeout(tweakModal,50))),hideBtn(SHIP_SEL,"Ship"),hideBtn(PKUP_SEL,"Pick up"),hideBtn(DEL_SEL,"Deliver"),repElContent(".ant-result-title span","your quote request has been submitted","<strong>Your order has been submitted.</strong><br/><br/>"),repElContent(".ant-result-subtitle div","we will review your quote and comments","<b>IMPORTANT NOTE: Your email confirmation will label this order a &quot;Quote Request,&quot; but we will process it as an order from your library.</b>"),repElContent(".ant-card-body div","requested a quote","Standard library delivery"),repElContent("span","requested a quote","<strong>Order Type</strong> Library")}function libraryTweakOrderSummary(){repElContent("span","requested a quote","<strong>Order Type</strong> Library")}function startOrderSummaryWatcher(){let t=0,e=!1;const n=40,i=250,r=setInterval((()=>{t++,libraryTweakOrderSummary();const o=Array.from(document.querySelectorAll("span")).some((t=>{const e=t.textContent.toLowerCase();return e.includes("order type")&&e.includes("library")}));(e||t>=n)&&clearInterval(r),o&&(e=!0)}),i)}!function(){if(!window.fetch)return;const t=window.fetch;window.fetch=function(e,n){const r="string"==typeof e?e:e&&e.url,o=t.apply(this,arguments);return r&&-1!==r.indexOf("/customer/session/get")&&o.then((function(t){try{t.clone().json().then((function(t){const e=t&&t.user;if(!e)return;libAccts.includes(e.corp_id)?(console.log("CustLibFunc: Library account detected"),isLibraryAccount=!0,runLibTweaksForCurrentPage()):console.log("CustLibFunc: Non-library account.")})).catch((function(){}))}catch(t){}})).catch((function(){})),o}}();!function(){const t=history.pushState,e=history.replaceState;function n(){isLibraryAccount&&runLibTweaksForCurrentPage()}history.pushState=function(){const r=t.apply(this,arguments);return n(),r},history.replaceState=function(){const t=e.apply(this,arguments);return n(),t},window.addEventListener("popstate",n)}();

